<div class="container" *ngIf="!isModerator()">
    <div class="container-form">
      <div class="row margin-rows">
        <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
            <div id="carouselExample" class="carousel slide full-height">
                <div class="carousel-inner full-height">
                  <div class="carousel-item active full-height" *ngFor="let images of product?.imagenes">
                    <img [src]="images.url" class="d-block w-100">
                  </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 container-information">
            <h3>{{product?.nombre}}</h3>
            <h2 class="color">{{product?.precio | currency}}</h2>
            <h5 class="color container-send">
              <i class="bi bi-truck"></i>
              Envío gratis
            </h5>
            <h6>Cantidad: 1 unidad de ({{product?.disponibilidad}} disponibles)</h6>
            <div class="container-actions">
              <button class="btn btn-primary btn-buy btn-sm"
                      (click)="addCart(product)">
                      <i class="bi bi-cart"></i>
                      Añadir al carrito
              </button>
              <button class="btn btn-danger btn-buy btn-sm"
                      (click)="addFavorites(product)">
                      <i class="bi bi-bag-heart"></i>
                      Añadir a favoritos
              </button>
            </div>
            <div class="container-description">
              <h4>Descripción</h4>
              <p>
                {{product?.descripcion}}
              </p>
            </div>
        </div>
      </div>
      <div *ngIf="isLogged()">
        <br>
        <hr>
        <br>
        <form [formGroup]="frmComments" class="needs-validation" novalidate>
          <div class="row">
            <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
              <label class="form-label">Comentario</label>
              <textarea class="form-control"
                        formControlName="comment"
                        [ngClass]="{'is-invalid': getCommentField?.touched && getCommentField?.errors }"></textarea>
              <div *ngIf="getCommentField?.touched && getCommentField?.errors" class="invalid-feedback">
                El campo comentario es requerido
              </div>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 container-save">
              <button class="btn btn-primary" (click)="createComment()">Agregar comentario</button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <app-alert [alert]="alert"></app-alert>
    <br>

    <div>
      <h3>Lista de comentarios</h3>
      <hr>
      <div class="row container-principal-comment" *ngIf="isLogged()">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 container-comment" *ngFor="let comment of lstComments">
          <div class="container-date">
            <h5>{{comment.nombreUsuario}}</h5>
            <h6>{{comment.fechaCreacion | date : 'dd/MM/yyyy'}}</h6>
          </div>
          <div>
            <p>
              {{comment.descripcion}}
            </p>
          </div>
        </div>
      </div>
    </div>
</div>

<div class="container" *ngIf="isModerator()">
  <div class="row container-form">
      <div class="col-lg-7 col-md-7 col-sm-12 col-xs-12">
          <div id="carouselExample" class="carousel slide full-height">
              <div class="carousel-inner full-height">
                <div class="carousel-item active full-height" *ngFor="let images of product.imagenes">
                  <img [src]="images.url" class="d-block w-100">
                </div>
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
      </div>
      <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12 container-information">
          <div class="container-title">
              <h3>{{product.nombre}}</h3>
          </div>
          <h5><span>Precio:</span> {{product.precio | currency}}</h5>
          <h5><span>Disponibilidad:</span> {{product.disponibilidad}}</h5>
          <h5><span>Fecha publicación:</span> {{product.fechaPublicacion | date}}</h5>
          <h5><span>Fecha publicación:</span> {{product.fechaLimite | date}}</h5>
          <h5><span>Vendedor:</span> {{product.nombreVendedor}}</h5>
          <div class="container-description">
            <h5>Descripción</h5>
            <p>
              {{product.descripcion}}
            </p>
          </div>
          <div class="container-btn-return">
            <button class="btn btn-primary" (click)="returnPage()">
              <i class="bi bi-arrow-return-left"></i>
              Volver
            </button>
          </div>
      </div>
  </div>
</div>